<!DOCTYPE HTML>
<html>
    <head>

        <title> Hanabi </title>
        <meta charset="utf-8">
        <script type="text/javascript" src="scripts/jquery-2.0.3.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="stylesheets/start_screen.css">
        <link rel="stylesheet" type="text/css" href="stylesheets/chat.css">
        <link rel="stylesheet" type="text/css" href="stylesheets/game_table.css">
        <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">

    </head>

    <body>
        <script type="text/javascript" src="/_ah/channel/jsapi"></script>
        <script>
            var channel = new goog.appengine.Channel("{{ token }}");
            var user_id = "{{ user_id }}";
        </script>
        <script type="text/javascript" src="scripts/global_vars.js"></script>
        <script type="text/javascript" src="scripts/game.js"></script>
        <script type="text/javascript" src="scripts/channel_create.js"></script>
        <script type="text/javascript" src="scripts/main.js"></script>

        <div class="modal fade" id="RulesModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                            <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>                        
                        </button>
                        <h4 class="modal-title" id="ModalLabel"> Hanabi rules </h4>
                    </div>
                    
                    <div class="modal-body">

                        <p style="font-family: arial">    There are 5 colors (<span class="red_card">red</span>, <span class="green_card">green</span>, <span class="blue_card">blue</span>, <span class="yellow_card">yellow</span>, <span class="white_card">white</span>) in the deck. In each color there are 10 cards: 3 cards are «1», 2 cards are «2», «3» and «4» and only one – «5». Also, there are 3 lives and 8 hints.</p>
                        <p style="font-family: arial">    Hanabi is a collective game. All players have one goal: maximize the global score – the amount of cards laid in solitaire. You can see all cards in others hands, but not in yours. If there are 2 or 3 players, then each player have 5 cards, if 4 players, then 4 cards.</p>
                        <p style="font-family: arial">    Players makes moves one by one. At every move player decides to make one of three: throw one of his cards to junk, put one of his cards to solitaire or make a hint to another player.</p>
                        <p style="font-family: arial">    Junk: that card goes to junk and it can't be played anymore. If deck not empty yet, then player takes a new card. Also, if there are less then 8 hints, it increases by one.</p>
                        <p style="font-family: arial">    Solitaire: card goes to solitaire only if there is already card of the same color and previous value (or empty for «1»). Otherwise, this card goes to junk and one life dies. You have only 3 lifes. Also, if the laid card was «5» then one hint adds.</p>
                        <p style="font-family: arial">    Hint: There are two types of hint: color hint and value hint. Each your move (if there are left at least one hint chip) you can choose to whom and what you want to hint (value or color) and after you've choosen the card you hint to your partner the location of all cards with this same property. For example, he can show where are all red cards in one hand, or all «2» located. After each hint one hint chip burns.</p>
                        <p style="font-family: arial">    The game ends if all 25 cards are in the solitaire, or if there are no lives anymore, or if there are no cards in the deck and one circle of moves has been made.</p>
                        <p style="font-family: arial">    Result of the game is the amount of cards in the solitaire if there are at least one life stayed alive and otherwise – 0.</p>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Got it!</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="false">
            <div class="modal-dialog">
                <div class="modal-content" id="alert_modal_content">
                </div>
            </div>
        </div>

        <div class="navbar navbar-default" role="navigation" style="top: -2px">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#" onclick="go_to_main();">Hanabi</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a style="font-size: 16px" title="You can't change your nick during the game">Your current nick: <span id="nick"></span></a>
                        </li>
                        <li>
                            <input style="margin-top: 8px; margin-right: 3px;" type="text" class="form-control" placeholder="new nick" maxlength="20" id="new_nick">
                        </li>
                        <li>
                            <button style="margin-top: 8px; margin-left: 3px;" type="submit" class="btn btn-success" onclick="set_nick()" id="set_new_nick">Set</button>
                        </li>
                        <li><a href="#" data-toggle="modal" data-target="#RulesModal">Rules</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="main_content">
            <div class="panel panel-info room_list">
                <div class="panel-heading">
                    <h3> Room list </h3>
                    <button type="button" class="btn btn-default refresh_btn btn-xs" onclick="refresh()">
                        <span class="glyphicon glyphicon-refresh"></span>
                    </button>
                </div>
                <div class="panel-body game_list" id="game_list" style="overflow-y: scroll">
                </div>
            </div>

            <div class="panel panel-success main_menu">

                <div class="panel-heading">
                    <h3> Create your own game! </h3>
                </div>

                <div class="panel-body" style="height: 270px">

                    <input type="text" class="form-control" placeholder="Game name" maxlength="20" size="20" id="game_name" style="width: 150px">
                    <input type="text" class="form-control" placeholder="Game password" size="20" id="password"  style="width: 150px">
                    <button type="button" class="btn btn-success create_btn" onclick="create_game()">Create Game</button>

                </div>

            </div>

        </div>

        <div id="chat_room" style="display: none">
            <div class="panel panel-info chat" style="margin-bottom: 0px">
                <div class="panel-body msg_list" id="chat">
                
                </div>
                <div class="panel-footer">
                    <div class="message_create">
                        <textarea onkeyup="javascript:if(event.keyCode==13||event.keyCode==10){submit();}" id="message" style="resize: none"></textarea>
                        <button class="btn btn-success chat_btn" onclick="submit()">Submit</button>
                        <button class="btn btn-danger chat_btn" id="start" onclick="start_game()" style="display: none">Start</button>
                    </div>
                </div>
            </div>

            <div class="online_list" id="online_list">

            </div>
        </div>

        <div id="game_table" style="display: none">
            <div id="left_hand"></div>

            <div id="upper_hand"></div>

            <div id="right_hand"></div>

            <div id="table">
                <div id="solitaire"></div>
                
                <div id="chips"></div>

                <div id="junk">
                    <ul class="nav nav-pills nav-stacked junk_sort" style="width: 70px; text-align: center !important">
                        <li class="active"><a href="#time_tab" data-toggle="pill">Time</a></li>
                        <li><a href="#color_tab" data-toggle="pill">Color</a></li> 
                    </ul>

                    <div class="tab-content junk_tabs" style="float: right">
                        <div class="tab-pane active junk_tabs" id="time_tab">
                        </div>

                        <div class="tab-pane junk_tabs" id="color_tab" style="overflow-y: scroll">
                        </div>
                    </div>
                </div>

            </div>

            <div id="down_hand"></div>
            <div id="players_order">
            </div>
        </div>

        <p id="last" style="clear: both; display: none;"></p>

    </body>
</html>